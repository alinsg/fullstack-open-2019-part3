{"version":3,"sources":["services/numbers.js","components/Numbers.js","components/Form.js","components/Header.js","components/Search.js","components/Alerts/AddAlert.js","components/Alerts/DeleteAlert.js","components/Alerts/ErrorAlert.js","App.js","index.js"],"names":["baseUrl","numbers","axios","get","then","response","data","newObject","post","id","put","concat","personId","delete","Input","props","onButtonClick","person","react_default","a","createElement","onClick","Numbers","persons","onDeleteButtonClick","Fragment","map","key","name","number","Numbers_Input","text","eventHandler","onChange","Button","type","Form","onFormSubmit","onNameInputChange","onNumberInputChange","onSubmit","Form_Input","Form_Button","Header","title","Search","onPersonSearch","AddAlert","style","border","backgroundColor","borderRadius","color","DeleteAlert","ErrorAlert","errorMessage","App","_useState","useState","appTitle","Object","slicedToArray","_useState3","_useState4","setPersons","_useState5","_useState6","personName","setPersonName","_useState7","_useState8","personNumber","setPersonNumber","_useState9","_useState10","isSearching","setSearchingState","_useState11","_useState12","matchedPersons","setMatchedPersons","_useState13","_useState14","updatePersonsFromDb","setUpdatePersonsFromDb","_useState15","_useState16","alertType","setAlertType","_useState17","_useState18","nameOfPersonToRemove","setNameOfPersonToRemove","_useState19","_useState20","errorText","setErrorText","useEffect","numberService","personsFromDb","timeout","setTimeout","addPerson","newPerson","personToCheck","some","personToUpdate","searchedPerson","filter","window","confirm","catch","error","createErrorAlert","updatePersonNumber","createNewPersonEntry","handleDeleteButtonClick","components_Header","Alerts_AddAlert","Alerts_DeleteAlert","Alerts_ErrorAlert","components_Search","event","target","value","searchedPeople","toLowerCase","includes","components_Form","preventDefault","components_Numbers","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.6b082aaf.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = personId => {\r\n  const request = axios.delete(`${baseUrl}/${personId}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, remove }\r\n","import React from 'react'\r\n\r\nconst Input = props => {\r\n  const { onButtonClick, person } = props\r\n  return <button onClick={() => onButtonClick(person)}>delete</button>\r\n}\r\n\r\nconst Numbers = props => {\r\n  const { persons, onDeleteButtonClick } = props\r\n\r\n  const renderPersons = () =>\r\n    persons.map(person => (\r\n      <p key={person.name}>\r\n        {person.name} {person.number}{' '}\r\n        <span>\r\n          <Input onButtonClick={onDeleteButtonClick} person={person} />\r\n        </span>\r\n      </p>\r\n    ))\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div>{renderPersons()}</div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default Numbers\r\n","import React from 'react'\r\n\r\nconst Input = props => {\r\n  const { text, eventHandler } = props\r\n  return (\r\n    <div>\r\n      {text} <input onChange={eventHandler} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Button = props => {\r\n  const { text, type } = props\r\n  return (\r\n    <div>\r\n      <button type={type}>{text}</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Form = props => {\r\n  const { onFormSubmit, onNameInputChange, onNumberInputChange } = props\r\n  return (\r\n    <form onSubmit={onFormSubmit}>\r\n      <Input text='name: ' eventHandler={onNameInputChange} />\r\n      <Input text='number: ' eventHandler={onNumberInputChange} />\r\n      <Button type='submit' text='add' />\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default Form\r\n","import React from 'react'\r\n\r\nconst Header = props => {\r\n  const { title } = props\r\n  return <h2>{title}</h2>\r\n}\r\n\r\nexport default Header\r\n","import React from 'react'\r\n\r\nconst Search = props => {\r\n  const { onPersonSearch } = props\r\n  return (\r\n    <div>\r\n      <p>\r\n        filter numbers{' '}\r\n        <span>\r\n          <input onChange={onPersonSearch} />\r\n        </span>\r\n      </p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Search\r\n","import React from 'react'\r\n\r\nconst AddAlert = props => {\r\n  const { name } = props\r\n  return (\r\n    <div\r\n      style={{\r\n        border: '2px solid green',\r\n        backgroundColor: 'gray',\r\n        borderRadius: '5px'\r\n      }}\r\n    >\r\n      <h2 style={{ color: 'green' }}>Added {name}</h2>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AddAlert\r\n","import React from 'react'\r\n\r\nconst DeleteAlert = props => {\r\n  const { name } = props\r\n  return (\r\n    <div\r\n      style={{\r\n        border: '2px solid red',\r\n        backgroundColor: 'gray',\r\n        borderRadius: '5px'\r\n      }}\r\n    >\r\n      <h2 style={{ color: 'red' }}>\r\n        Information of {name} has been removed from server\r\n      </h2>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DeleteAlert\r\n","import React from 'react'\r\n\r\nconst ErrorAlert = props => {\r\n  const { errorMessage } = props\r\n  return (\r\n    <div\r\n      style={{\r\n        border: '2px solid red',\r\n        backgroundColor: 'gray',\r\n        borderRadius: '5px'\r\n      }}\r\n    >\r\n      <h2 style={{ color: 'red' }}>{errorMessage}</h2>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ErrorAlert\r\n","import React, { useState, useEffect } from 'react'\r\nimport numberService from './services/numbers'\r\nimport './App.css'\r\nimport Numbers from './components/Numbers'\r\nimport Form from './components/Form'\r\nimport Header from './components/Header'\r\nimport Search from './components/Search'\r\nimport AddAlert from './components/Alerts/AddAlert'\r\nimport DeleteAlert from './components/Alerts/DeleteAlert'\r\nimport ErrorAlert from './components/Alerts/ErrorAlert'\r\n\r\nconst App = () => {\r\n  const [appTitle] = useState('Phonebook')\r\n  const [persons, setPersons] = useState([])\r\n  const [personName, setPersonName] = useState('')\r\n  const [personNumber, setPersonNumber] = useState('')\r\n  const [isSearching, setSearchingState] = useState(false)\r\n  const [matchedPersons, setMatchedPersons] = useState()\r\n  const [updatePersonsFromDb, setUpdatePersonsFromDb] = useState(false)\r\n  const [alertType, setAlertType] = useState('none')\r\n  const [nameOfPersonToRemove, setNameOfPersonToRemove] = useState()\r\n  const [errorText, setErrorText] = useState(null)\r\n\r\n  useEffect(() => {\r\n    numberService.getAll().then(personsFromDb => {\r\n      setPersons(personsFromDb)\r\n      setUpdatePersonsFromDb(false)\r\n    })\r\n  }, [updatePersonsFromDb])\r\n\r\n  const timeout = () => {\r\n    setTimeout(() => {\r\n      setAlertType(null)\r\n    }, 5000)\r\n  }\r\n\r\n  const personAlreadyAdded = personToCheck =>\r\n    persons.some(person => person.name === personToCheck.name)\r\n\r\n  const updatePersonNumber = personToUpdate => {\r\n    const { name, number } = personToUpdate\r\n    const searchedPerson = persons.filter(person => person.name === name)[0]\r\n    const id = searchedPerson.id\r\n    if (number !== searchedPerson.number) {\r\n      const confirmDialog = window.confirm(\r\n        `${name} is already added to phonebook, replace the old number with a new one?`\r\n      )\r\n      if (confirmDialog) {\r\n        const newPerson = {\r\n          name: name,\r\n          number: number,\r\n          id: id\r\n        }\r\n        numberService.update(id, newPerson).catch(error => {\r\n          createErrorAlert()\r\n          timeout()\r\n        })\r\n        setAlertType('add')\r\n        timeout()\r\n        setUpdatePersonsFromDb(true)\r\n      }\r\n    }\r\n  }\r\n\r\n  const createNewPersonEntry = newPerson => {\r\n    numberService.create(newPerson).catch(error => {\r\n      createErrorAlert()\r\n      timeout()\r\n    })\r\n    setAlertType('add')\r\n    timeout()\r\n  }\r\n\r\n  const addPerson = newPerson => {\r\n    personAlreadyAdded(newPerson)\r\n      ? updatePersonNumber(newPerson)\r\n      : createNewPersonEntry(newPerson)\r\n    setUpdatePersonsFromDb(true)\r\n  }\r\n\r\n  const handleFormSubmit = event => {\r\n    event.preventDefault()\r\n    const person = {\r\n      name: personName,\r\n      number: personNumber\r\n    }\r\n    addPerson(person)\r\n  }\r\n\r\n  const handleNameInputChange = event => {\r\n    setPersonName(event.target.value)\r\n  }\r\n\r\n  const handleNumberInputChange = event => {\r\n    setPersonNumber(event.target.value)\r\n  }\r\n\r\n  const handlePersonSearch = event => {\r\n    event.target.value !== ''\r\n      ? setSearchingState(true)\r\n      : setSearchingState(false)\r\n    const searchedPeople = persons.filter(person =>\r\n      person.name.toLowerCase().includes(event.target.value.toLowerCase())\r\n    )\r\n    setMatchedPersons(searchedPeople)\r\n  }\r\n\r\n  const handleDeleteButtonClick = person => {\r\n    const { id, name } = person\r\n    const confirmDialog = window.confirm(`Do you want to remove ${name}`)\r\n    if (confirmDialog) {\r\n      numberService.remove(id).catch(error => {\r\n        createErrorAlert()\r\n        timeout()\r\n      })\r\n      setPersons(persons.filter(person => person.id !== id))\r\n      setNameOfPersonToRemove(name)\r\n      setAlertType('delete')\r\n      timeout()\r\n    }\r\n  }\r\n\r\n  const createErrorAlert = () => {\r\n    setAlertType('error')\r\n    setErrorText('Something went wrong')\r\n  }\r\n\r\n  const renderAlerts = () => {\r\n    if (alertType === 'add') {\r\n      return <AddAlert name={personName} />\r\n    } else if (alertType === 'delete') {\r\n      return <DeleteAlert name={nameOfPersonToRemove} />\r\n    } else if (alertType === 'error') {\r\n      return <ErrorAlert errorMessage={errorText} />\r\n    } else {\r\n      return <React.Fragment />\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Header title={appTitle} />\r\n      {renderAlerts()}\r\n      <Search onPersonSearch={handlePersonSearch} />\r\n      <h2>Add a new person</h2>\r\n      <Form\r\n        onNameInputChange={handleNameInputChange}\r\n        onNumberInputChange={handleNumberInputChange}\r\n        onFormSubmit={handleFormSubmit}\r\n      />\r\n      <h2>Numbers</h2>\r\n      {isSearching === false ? (\r\n        <Numbers\r\n          persons={persons}\r\n          onDeleteButtonClick={handleDeleteButtonClick}\r\n        />\r\n      ) : (\r\n        <Numbers\r\n          persons={matchedPersons}\r\n          onDeleteButtonClick={handleDeleteButtonClick}\r\n        />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}